#!/bin/bash
# Simple script that uses maim (X11) or grim/slurp (Wayland) to take a screenshot

dir="$HOME/Pictures/screenshots"
[ -d "$dir" ] || mkdir -p "$dir"
output="$dir/$(date +%s_%Y_%m_%d_%H:%M:%S).png"

# Detect environment
if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
    case "$1" in
        "full")
            grim "$output" || exit
            ;;
        "window")
            grim -g "$(slurp)" "$output" || exit
            ;;
        *)
            echo "Usage: $0 {full|window}"
            exit 1
            ;;
    esac
else
    case "$1" in
        "full")
            maim "$output" || exit
            ;;
        "window")
            maim -s "$output" || exit
            ;;
        *)
            echo "Usage: $0 {full|window}"
            exit 1
            ;;
    esac
fi

notify-send "Screenshot saved to ${output}"
