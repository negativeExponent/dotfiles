#!/bin/bash

# Sources colors from xrdb and export color configs for apps that do not support
# reading xrdb

. "${HOME}/.local/bin/getcolors"

termcolors() {
	cat > "${HOME}/.config/kitty/colors.conf" << EOF
#
# DO NOT EDIT. This is file is auto-generated by themer.
#

foreground            ${FOREGROUND}
background            ${BACKGROUND}
selection_foreground  ${BACKGROUND}
selection_background  ${GRAY}

url_color ${MAGENTA}

# black
color0  ${BLACK}
color8  ${ALTBLACK}

# red
color1  ${RED}
color9  ${ALTRED}

# green
color2  ${GREEN}
color10 ${ALTGREEN}

# yellow
color3  ${YELLOW}
color11 ${ALTYELLOW}

# blue
color4  ${BLUE}
color12 ${ALTBLUE}

# magenta
color5  ${MAGENTA}
color13 ${ALTMAGENTA}

# cyan
color6  ${CYAN}
color14 ${ALTCYAN}

# white
color7  ${GRAY}
color15 ${WHITE}

# Cursor colors
cursor            ${WHITE}
cursor_text_color ${BACKGROUND}

# Tab bar colors
active_tab_foreground   ${ALTBLACK}
active_tab_background   ${FOREGROUND}
inactive_tab_foreground ${BACKGROUND}
inactive_tab_background ${ALTBLACK}
EOF
}

roficolors_old() {
	cat > "${HOME}/.config/rofi/colors.rasi" << EOF
/*
 * DO NOT EDIT. This is file is auto-generated by themer.
 */

* {
    foreground:         ${FOREGROUND};
	background:         ${BACKGROUND};
    background-color:   ${BACKGROUND};
	urgent-color:       ${RED};
	urgent-foreground:  ${BACKGROUND};
	urgent-background:  ${RED};
	selected-color:     ${BLUE};
    border-color:       ${BLUE};
	active-color:       ${GREEN};
    alpha:              #00000000;
}
EOF
}

roficolors() {
	cat > "${HOME}/.config/rofi/colors.rasi" << EOF
/*
 * DO NOT EDIT. This is file is auto-generated by themer.
 */

* {
    bg-col:       ${BACKGROUND};
    bg-col-light: ${BACKGROUND};
    border-col:   ${BACKGROUND};
    selected-col: ${BACKGROUND};
    blue:         ${BLUE};
    fg-col:       ${FOREGROUND};
    fg-col2:      ${RED};
    grey:         ${FOREGROUND};
    width:        600;
}
EOF
}

resetTerminal() {
	if [[ 'pidof ${TERMINAL}' ]]; then 
		killall -USR1 $TERMINAL
	fi
}

termcolors
roficolors
resetTerminal
